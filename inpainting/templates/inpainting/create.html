{% extends 'base.html' %}
{% load static %}

{% block content %}
    <form method="POST" {% url 'inpaintingapp:create' %} enctype="multipart/form-data">
        {% csrf_token %}
        <div class='card'>
            <div  class="card-body text-success text-center" >
                <label class="image-preview spinner-postion" id="imagePreview">
                    <img src="{% static 'image/upload_image.jpg' %}"
                         alt="Image Preview"
                         class="image-preview__image"
                         style="width: 20rem;">
                        {{ form.image }}
                </label>
                <div>
                    <input class="btn btn-outline-success" id="btnFEtch" type="submit" value="Go!">
                </div>
            </div>

        </div>

    </form>

<script>
    const inpFile = document.getElementById("inpFile");
    const previewContainer = document.getElementById("imagePreview");
    const previewImage = previewContainer.querySelector(".image-preview__image");


    inpFile.addEventListener("change", function () {
        const file = this.files[0];
        console.log(file)
        if (file) {
            const reader = new FileReader()

            previewImage.style.display = "block";

            reader.addEventListener("load", function() {
                previewImage.setAttribute("src", this.result);
            });

            reader.readAsDataURL(file);
        } else {
            previewDefaultText.style.display = null;
            previewImage.style.display = null;
        }


    })


</script>

{% endblock %}